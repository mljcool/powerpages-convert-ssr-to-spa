(self.webpackChunk_microsoft_powerpages_host=self.webpackChunk_microsoft_powerpages_host||[]).push([[170],{4170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ActionMethodsWithConfig:()=>Ce,Canvas:()=>G,CoreEventHandlers:()=>ge,DefaultEventHandlers:()=>Ee,DerivedCoreEventHandlers:()=>me,Editor:()=>Ae,Element:()=>W,Events:()=>xe,Frame:()=>V,NodeElement:()=>B,NodeHelpers:()=>de,NodeProvider:()=>f,NodeSelectorType:()=>X,QueryMethods:()=>ye,ROOT_NODE:()=>r.e3,connectEditor:()=>Z,connectNode:()=>ee,createTestNodes:()=>qe,createTestState:()=>Me,defaultElementProps:()=>H,deprecateCanvasComponent:()=>$,editorInitialState:()=>we,elementPropToNodeData:()=>U,expectEditorState:()=>Le,serializeNode:()=>se,useEditor:()=>K,useEditorStore:()=>Te,useEventHandler:()=>I,useNode:()=>M});var r=n(8209),o=n(1646),a=n.n(o),i=n(9541),s=n(9680),d=n.n(s),c=n(3037),u=n.n(c);const l=a().createContext(null),f=({id:e,related:t=!1,children:n})=>a().createElement(l.Provider,{value:{id:e,related:t}},n);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function m(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function C(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}const k=(0,o.createContext)(null);var D=(0,o.createContext)(null),I=function(){return(0,o.useContext)(D)};function P(e){var t=I(),n=(0,o.useContext)(k);(0,i.A)(n,r.Nf);var a=(0,r.Fd)(n,e),s=(0,o.useMemo)((function(){return t&&t.createConnectorsUsage()}),[t]);(0,o.useEffect)((function(){return s.register(),function(){s.cleanup()}}),[s]);var d=(0,o.useMemo)((function(){return s&&(0,r.iw)(s.connectors)}),[s]);return v(v({},a),{},{connectors:d,inContext:!!n,store:n})}var R=["actions","query","connectors"];function L(e){var t=(0,o.useContext)(l);(0,i.A)(t,r.EA);var n=t.id,a=t.related,s=P((function(t){return n&&t.nodes[n]&&e&&e(t.nodes[n])})),d=s.actions,c=s.connectors,u=j(s,R),f=(0,o.useMemo)((function(){return(0,r.iw)({connect:function(e){return c.connect(e,n)},drag:function(e){return c.drag(e,n)}})}),[c,n]),p=(0,o.useMemo)((function(){return{setProp:function(e,t){t?d.history.throttle(t).setProp(n,e):d.setProp(n,e)},setCustom:function(e,t){t?d.history.throttle(t).setCustom(n,e):d.setCustom(n,e)},setHidden:function(e){return d.setHidden(n,e)}}}),[d,n]);return v(v({},u),{},{id:n,related:a,inNodeContext:!!t,actions:p,connectors:f})}var q=["id","related","actions","inNodeContext","connectors"];function M(e){var t=L(e),n=t.id,o=t.related,a=t.actions,i=t.inNodeContext,s=t.connectors;return v(v({},j(t,q)),{},{actions:a,id:n,related:o,setProp:function(e,t){return(0,r.lt)("useNode().setProp()",{suggest:"useNode().actions.setProp()"}),a.setProp(e,t)},inNodeContext:i,connectors:s})}const _=({render:e})=>{const{connectors:{connect:t,drag:n}}=M();return"string"==typeof e.type?t(n(a().cloneElement(e))):e},F=()=>{const{type:e,props:t,nodes:n,hydrationTimestamp:r}=L((e=>({type:e.data.type,props:e.data.props,nodes:e.data.nodes,hydrationTimestamp:e._hydrationTimestamp})));return(0,o.useMemo)((()=>{let r=t.children;n&&n.length>0&&(r=a().createElement(a().Fragment,null,n.map((e=>a().createElement(B,{id:e,key:e})))));const o=a().createElement(e,t,r);return"string"==typeof e?a().createElement(_,{render:o}):o}),[e,t,r,n])},z=({render:e})=>{const{hidden:t}=L((e=>({hidden:e.data.hidden}))),{onRender:n}=P((e=>({onRender:e.options.onRender})));return t?null:a().createElement(n,{render:e||a().createElement(F,null)})},B=({id:e,render:t})=>a().createElement(f,{id:e},a().createElement(z,{render:t})),H={is:"div",canvas:!1,custom:{},hidden:!1},U={is:"type",canvas:"isCanvas"};function W({id:e,children:t,...n}){const{is:s}={...H,...n},{query:d,actions:c}=P(),{node:u,inNodeContext:l}=L((e=>({node:{id:e.id,data:e.data}}))),[f,p]=(0,o.useState)(null);return(0,r.Su)((()=>{(0,i.A)(!!e,r.xM);const{id:o,data:f}=u;if(l){let r;const i=f.linkedNodes&&f.linkedNodes[e]&&d.node(f.linkedNodes[e]).get();if(i&&i.data.type===s)r=i.id;else{const i=a().createElement(W,n,t),s=d.parseReactElement(i).toNodeTree();r=s.rootNodeId,c.history.ignore().addLinkedNodeFromTree(s,o,e)}p(r)}})),f?a().createElement(B,{id:f}):null}const $=()=>(0,r.lt)("<Canvas />",{suggest:"<Element canvas={true} />"});function G({...e}){return(0,o.useEffect)((()=>$()),[]),a().createElement(W,{...e,canvas:!0})}const J=()=>{const{timestamp:e}=P((e=>({timestamp:e.nodes[r.e3]&&e.nodes[r.e3]._hydrationTimestamp})));return e?a().createElement(B,{id:r.e3,key:e}):null},V=({children:e,json:t,data:n})=>{const{actions:i,query:s}=P();t&&(0,r.lt)("<Frame json={...} />",{suggest:"<Frame data={...} />"});const d=(0,o.useRef)({initialChildren:e,initialData:n||t}),c=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{const{initialChildren:e,initialData:t}=d.current;if(t)return void i.history.ignore().deserialize(t);if(!e||c.current)return;const n=a().Children.only(e),o=s.parseReactElement(n).toNodeTree(((e,t)=>(t===n&&(e.id=r.e3),e)));i.history.ignore().addNodeTree(o),c.current=!0}),[i,s]),a().createElement(J,null)};var X,Q;(Q=X||(X={}))[Q.Any=0]="Any",Q[Q.Id=1]="Id",Q[Q.Obj=2]="Obj";const Y=e=>{const{addLinkedNodeFromTree:t,setDOM:n,setNodeEvent:r,replaceNodes:o,reset:a,...i}=e;return i};function K(e){const{connectors:t,actions:n,query:r,store:a,...i}=P(e),s=Y(n);return{connectors:t,actions:(0,o.useMemo)((()=>({...s,history:{...s.history,ignore:(...e)=>Y(s.history.ignore(...e)),throttle:(...e)=>Y(s.history.throttle(...e))}})),[s]),query:r,store:a,...i}}function Z(e){return t=>n=>{const r=e?K(e):K();return a().createElement(t,{...r,...n})}}function ee(e){return function(t){return n=>{const r=M(e);return a().createElement(t,{...r,...n})}}}var te=function(e){return Object.fromEntries?Object.fromEntries(e):e.reduce((function(e,t){var n,r=function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],d=!0,c=!1;try{for(a=(n=n.call(e)).next;!(d=(r=a.call(n)).done)&&(s.push(r.value),2!==s.length);d=!0);}catch(e){c=!0,o=e}finally{try{if(!d&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(n)||T(n,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],a=r[1];return v(v({},e),{},b({},o,a))}),{})},ne=function(e,t,n){var o=Array.isArray(t)?t:[t],a=v({existOnly:!1,idOnly:!1},n||{}),s=o.filter((function(e){return!!e})).map((function(t){return"string"==typeof t?{node:e[t],exists:!!e[t]}:"object"!==h(t)||a.idOnly?{node:null,exists:!1}:{node:t,exists:!!e[t.id]}}));return a.existOnly&&(0,i.A)(0===s.filter((function(e){return!e.exists})).length,r.vc),s},re=["history"],oe=function(e,t){var n=t.name||t.displayName,o=function(){if(e[n])return n;for(var r=0;r<Object.keys(e).length;r++){var o=Object.keys(e)[r];if(e[o]===t)return o}return"string"==typeof t?t:void 0}();return(0,i.A)(o,r.GP.replace("%node_type%",n)),o};const ae=(e,t)=>"string"==typeof e?e:{resolvedName:oe(t,e)},ie=(e,t)=>{let{type:n,isCanvas:r,props:a}=e;return a=Object.keys(a).reduce(((e,n)=>{const r=a[n];return null==r||"function"==typeof r||(e[n]="children"===n&&"string"!=typeof r?o.Children.map(r,(e=>"string"==typeof e?e:ie(e,t))):"function"==typeof r.type?ie(r,t):r),e}),{}),{type:ae(n,t),isCanvas:!!r,props:a}},se=(e,t)=>{const{type:n,props:r,isCanvas:o,name:a,...i}=e;return{...ie({type:n,isCanvas:o,props:r},t),...i}};function de(e,t){(0,i.A)("string"==typeof t,r.cW);var n=e.nodes[t],o=function(t){return de(e,t)};return{isCanvas:function(){return!!n.data.isCanvas},isRoot:function(){return n.id===r.e3},isLinkedNode:function(){return n.data.parent&&o(n.data.parent).linkedNodes().includes(n.id)},isTopLevelNode:function(){return this.isRoot()||this.isLinkedNode()},isDeletable:function(){return!this.isTopLevelNode()},isParentOfTopLevelNodes:function(){return n.data.linkedNodes&&Object.keys(n.data.linkedNodes).length>0},isParentOfTopLevelCanvas:function(){return(0,r.lt)("query.node(id).isParentOfTopLevelCanvas",{suggest:"query.node(id).isParentOfTopLevelNodes"}),this.isParentOfTopLevelNodes()},isSelected:function(){return e.events.selected.has(t)},isHovered:function(){return e.events.hovered.has(t)},isDragged:function(){return e.events.dragged.has(t)},get:function(){return n},ancestors:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.nodes[r];return i?(o.push(r),i.data.parent?((t||!t&&0===a)&&(o=n(i.data.parent,o,a+1)),o):o):o}(n.data.parent)},descendants:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;return function t(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(n||!n&&0===s)&&e.nodes[a]?("childNodes"!==r&&o(a).linkedNodes().forEach((function(e){i.push(e),i=t(e,i,s+1)})),"linkedNodes"!==r&&o(a).childNodes().forEach((function(e){i.push(e),i=t(e,i,s+1)})),i):i}(t)},linkedNodes:function(){return Object.values(n.data.linkedNodes||{})},childNodes:function(){return n.data.nodes||[]},isDraggable:function(t){try{var a=n;return(0,i.A)(!this.isTopLevelNode(),r.t3),(0,i.A)(de(e,a.data.parent).isCanvas(),r.Es),(0,i.A)(a.rules.canDrag(a,o),r.A7),!0}catch(e){return t&&t(e),!1}},isDroppable:function(t,a){var s=ne(e.nodes,t),d=n;try{(0,i.A)(this.isCanvas(),r.u7),(0,i.A)(d.rules.canMoveIn(s.map((function(e){return e.node})),d,o),r.de);var c={};return s.forEach((function(t){var n=t.node,a=t.exists;if((0,i.A)(n.rules.canDrop(d,n,o),r.pG),a){(0,i.A)(!o(n.id).isTopLevelNode(),r.t3);var s=o(n.id).descendants(!0);(0,i.A)(!s.includes(d.id)&&d.id!==n.id,r.Lv);var u=n.data.parent&&e.nodes[n.data.parent];(0,i.A)(u.data.isCanvas,r.Es),(0,i.A)(u||!u&&!e.nodes[n.id],r.XD),u.id!==d.id&&(c[u.id]||(c[u.id]=[]),c[u.id].push(n))}})),Object.keys(c).forEach((function(t){var n=e.nodes[t];(0,i.A)(n.rules.canMoveOut(c[t],n,o),r.nI)})),!0}catch(e){return a&&a(e),!1}},toSerializedNode:function(){return se(n.data,e.options.resolver)},toNodeTree:function(e){var n=[t].concat(C(this.descendants(!0,e))).reduce((function(e,t){return e[t]=o(t).get(),e}),{});return{rootNodeId:t,nodes:n}},decendants:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.lt)("query.node(id).decendants",{suggest:"query.node(id).descendants"}),this.descendants(e)},isTopLevelCanvas:function(){return!this.isRoot()&&!n.data.parent}}}function ce(e,t,n,r){for(var o={parent:e,index:0,where:"before"},a=0,i=0,s=0,d=0,c=0,u=0,l=0,f=t.length;l<f;l++){var p=t[l];if(u=p.top+p.outerHeight,d=p.left+p.outerWidth/2,c=p.top+p.outerHeight/2,!(i&&p.left>i||s&&c>=s||a&&p.left+p.outerWidth<a))if(o.index=l,p.inFlow){if(r<c){o.where="before";break}o.where="after"}else r<u&&(s=u),n<d?(i=d,o.where="before"):(a=d,o.where="after")}return o}var ue=function(e){return"string"==typeof e?e:e.name};function le(e,t){var n=e.data.type,o={id:e.id||(0,r.r9)(),_hydrationTimestamp:Date.now(),data:v({type:n,name:ue(n),displayName:ue(n),props:{},custom:{},parent:null,isCanvas:!1,hidden:!1,nodes:[],linkedNodes:{}},e.data),related:{},events:{selected:!1,dragged:!1,hovered:!1},rules:{canDrag:function(){return!0},canDrop:function(){return!0},canMoveIn:function(){return!0},canMoveOut:function(){return!0}},dom:null};if(o.data.type===W||o.data.type===G){var i=v(v({},H),o.data.props);o.data.props=Object.keys(o.data.props).reduce((function(e,t){return Object.keys(H).includes(t)?o.data[U[t]||t]=i[t]:e[t]=o.data.props[t],e}),{}),o.data.name=ue(n=o.data.type),o.data.displayName=ue(n),o.data.type===G&&(o.data.isCanvas=!0,$())}t&&t(o);var s=n.craft;if(s&&(o.data.displayName=s.displayName||s.name||o.data.displayName,o.data.props=v(v({},s.props||s.defaultProps||{}),o.data.props),o.data.custom=v(v({},s.custom||{}),o.data.custom),null!=s.isCanvas&&(o.data.isCanvas=s.isCanvas),s.rules&&Object.keys(s.rules).forEach((function(e){["canDrag","canDrop","canMoveIn","canMoveOut"].includes(e)&&(o.rules[e]=s.rules[e])})),s.related)){var d={id:o.id,related:!0};Object.keys(s.related).forEach((function(e){o.related[e]=function(t){return a().createElement(f,d,a().createElement(s.related[e],t))}}))}return o}const fe=(e,t,n)=>{let{type:r,props:o}=e;const i=((e,t)=>"object"==typeof e&&e.resolvedName?"Canvas"===e.resolvedName?G:t[e.resolvedName]:"string"==typeof e?e:null)(r,t);if(!i)return;o=Object.keys(o).reduce(((e,n)=>{const r=o[n];return e[n]=null==r?null:"object"==typeof r&&r.resolvedName?fe(r,t):"children"===n&&Array.isArray(r)?r.map((e=>"string"==typeof e?e:fe(e,t))):r,e}),{}),n&&(o.key=n);const s={...a().createElement(i,{...o})};return{...s,name:oe(t,s.type)}},pe=(e,t)=>{const{type:n,props:o,...a}=e;(0,i.A)(void 0!==n&&"string"==typeof n||void 0!==n&&void 0!==n.resolvedName,r.y9.replace("%displayName%",e.displayName).replace("%availableComponents%",Object.keys(t).join(", ")));const{type:s,name:d,props:c}=fe(e,t),{parent:u,custom:l,displayName:f,isCanvas:p,nodes:v,hidden:h}=a;return{type:s,name:d,displayName:f||d,props:c,custom:l||{},isCanvas:!!p,hidden:!!h,parent:u,linkedNodes:a.linkedNodes||a._childCanvas||{},nodes:v||[]}},ve=(e,t)=>{if(t.length<1)return{[e.id]:e};const n=t.map((({rootNodeId:e})=>e)),r={...e,data:{...e.data,nodes:n}};return t.reduce(((t,n)=>{const r=n.nodes[n.rootNodeId];return{...t,...n.nodes,[r.id]:{...r,data:{...r.data,parent:e.id}}}}),{[e.id]:r})},he=(e,t)=>({rootNodeId:e.id,nodes:ve(e,t)});function ye(e){const t=e&&e.options,n=()=>ye(e);return{getDropPlaceholder:(t,o,a,i=(t=>e.nodes[t.id].dom))=>{const s=e.nodes[o],d=n().node(s.id).isCanvas()?s:e.nodes[s.data.parent];if(!d)return;const c=d.data.nodes||[],u=ce(d,c?c.reduce(((t,n)=>{const o=i(e.nodes[n]);if(o){const e={id:n,...(0,r.Jo)(o)};t.push(e)}return t}),[]):[],a.x,a.y),l=c.length&&e.nodes[c[u.index]],f={placement:{...u,currentNode:l},error:null};return ne(e.nodes,t).forEach((({node:e,exists:t})=>{t&&n().node(e.id).isDraggable((e=>f.error=e))})),n().node(d.id).isDroppable(t,(e=>f.error=e)),f},getOptions:()=>t,getNodes:()=>e.nodes,node:t=>de(e,t),getSerializedNodes(){const t=Object.keys(e.nodes).map((e=>[e,this.node(e).toSerializedNode()]));return te(t)},getEvent:t=>function(e,t){var n=e.events[t];return{contains:function(e){return n.has(e)},isEmpty:function(){return 0===this.all().length},first:function(){return this.all()[0]},last:function(){var e=this.all();return e[e.length-1]},all:function(){return Array.from(n)},size:function(){return this.all().length},at:function(e){return this.all()[e]},raw:function(){return n}}}(e,t),serialize(){return JSON.stringify(this.getSerializedNodes())},parseReactElement:t=>({toNodeTree(r){let i=function(e,t){let n=e;return"string"==typeof n&&(n=a().createElement(o.Fragment,{},n)),le({data:{type:n.type,props:{...n.props}}},(e=>{t&&t(e,n)}))}(t,((t,n)=>{const o=oe(e.options.resolver,t.data.type);t.data.displayName=t.data.displayName||o,t.data.name=o,r&&r(t,n)})),s=[];return t.props&&t.props.children&&(s=a().Children.toArray(t.props.children).reduce(((e,t)=>(a().isValidElement(t)&&e.push(n().parseReactElement(t).toNodeTree(r)),e)),[])),he(i,s)}}),parseSerializedNode:t=>({toNode(o){const a=pe(t,e.options.resolver);(0,i.A)(a.type,r.GP);const s="string"==typeof o&&o;return s&&(0,r.lt)("query.parseSerializedNode(...).toNode(id)",{suggest:"query.parseSerializedNode(...).toNode(node => node.id = id)"}),n().parseFreshNode({...s?{id:s}:{},data:a}).toNode(!s&&o)}}),parseFreshNode:t=>({toNode:n=>le(t,(t=>{t.data.parent===r.uX&&(t.data.parent=r.e3);const o=oe(e.options.resolver,t.data.type);(0,i.A)(null!==o,r.GP),t.data.displayName=t.data.displayName||o,t.data.name=o,n&&n(t)}))}),createNode(e,t){(0,r.lt)(`query.createNode(${e})`,{suggest:`query.parseReactElement(${e}).toNodeTree()`});const n=this.parseReactElement(e).toNodeTree(),o=n.nodes[n.rootNodeId];return t?(t.id&&(o.id=t.id),t.data&&(o.data={...o.data,...t.data}),o):o},getState:()=>e}}var ge=function(e){N(n,r.C1);var t=w(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"handlers",value:function(){return{connect:function(e,t){},select:function(e,t){},hover:function(e,t){},drag:function(e,t){},drop:function(e,t){},create:function(e,t,n){}}}}]),n}(),me=function(e){N(n,r.Bb);var t=w(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n)}(),be=function(){function e(t,n){y(this,e),b(this,"store",void 0),b(this,"dragTarget",void 0),b(this,"currentDropTargetId",void 0),b(this,"currentDropTargetCanvasAncestorId",void 0),b(this,"currentIndicator",null),b(this,"currentTargetId",void 0),b(this,"currentTargetChildDimensions",void 0),b(this,"dragError",void 0),b(this,"draggedNodes",void 0),b(this,"onScrollListener",void 0),this.store=t,this.dragTarget=n,this.currentDropTargetId=null,this.currentDropTargetCanvasAncestorId=null,this.currentTargetId=null,this.currentTargetChildDimensions=null,this.currentIndicator=null,this.dragError=null,this.draggedNodes=this.getDraggedNodes(),this.validateDraggedNodes(),this.onScrollListener=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollListener,!0)}return m(e,[{key:"cleanup",value:function(){window.removeEventListener("scroll",this.onScrollListener,!0)}},{key:"onScroll",value:function(e){var t=e.target,n=this.store.query.node(r.e3).get();t instanceof Element&&n&&n.dom&&t.contains(n.dom)&&(this.currentTargetChildDimensions=null)}},{key:"getDraggedNodes",value:function(){return ne(this.store.query.getNodes(),"new"===this.dragTarget.type?this.dragTarget.tree.nodes[this.dragTarget.tree.rootNodeId]:this.dragTarget.nodes)}},{key:"validateDraggedNodes",value:function(){var e=this;"new"!==this.dragTarget.type&&this.draggedNodes.forEach((function(t){t.exists&&e.store.query.node(t.node.id).isDraggable((function(t){e.dragError=t}))}))}},{key:"isNearBorders",value:function(t,n,r){return t.top+e.BORDER_OFFSET>r||t.bottom-e.BORDER_OFFSET<r||t.left+e.BORDER_OFFSET>n||t.right-e.BORDER_OFFSET<n}},{key:"isDiff",value:function(e){return!this.currentIndicator||this.currentIndicator.placement.parent.id!==e.parent.id||this.currentIndicator.placement.index!==e.index||this.currentIndicator.placement.where!==e.where}},{key:"getChildDimensions",value:function(e){var t=this,n=this.currentTargetChildDimensions;return this.currentTargetId===e.id&&n?n:e.data.nodes.reduce((function(e,n){var o=t.store.query.node(n).get().dom;return o&&e.push(v({id:n},(0,r.Jo)(o))),e}),[])}},{key:"getCanvasAncestor",value:function(e){var t=this;if(e===this.currentDropTargetId&&this.currentDropTargetCanvasAncestorId){var n=this.store.query.node(this.currentDropTargetCanvasAncestorId).get();if(n)return n}return function e(n){var r=t.store.query.node(n).get();return r&&r.data.isCanvas?r:r.data.parent?e(r.data.parent):null}(e)}},{key:"computeIndicator",value:function(e,t,n){var o=this.getCanvasAncestor(e);if(o&&(this.currentDropTargetId=e,this.currentDropTargetCanvasAncestorId=o.id,o.data.parent&&this.isNearBorders((0,r.Jo)(o.dom),t,n)&&!this.store.query.node(o.id).isLinkedNode()&&(o=this.store.query.node(o.data.parent).get()),o)){this.currentTargetChildDimensions=this.getChildDimensions(o),this.currentTargetId=o.id;var a=ce(o,this.currentTargetChildDimensions,t,n);if(this.isDiff(a)){var i=this.dragError;i||this.store.query.node(o.id).isDroppable(this.draggedNodes.map((function(e){return e.node})),(function(e){i=e}));var s=o.data.nodes[a.index],d=s&&this.store.query.node(s).get();return this.currentIndicator={placement:v(v({},a),{},{currentNode:d}),error:i},this.currentIndicator}}}},{key:"getIndicator",value:function(){return this.currentIndicator}}]),e}();b(be,"BORDER_OFFSET",10);var Ne=function(e,t){if(1===t.length||arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var n=t[0].getBoundingClientRect(),r=n.width,o=n.height,a=t[0].cloneNode(!0);return a.style.position="fixed",a.style.left="-100%",a.style.top="-100%",a.style.width="".concat(r,"px"),a.style.height="".concat(o,"px"),a.style.pointerEvents="none",document.body.appendChild(a),e.dataTransfer.setDragImage(a,0,0),a}var i=document.createElement("div");return i.style.position="fixed",i.style.left="-100%",i.style.top="-100%",i.style.width="100%",i.style.height="100%",i.style.pointerEvents="none",t.forEach((function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height,o=t.top,a=t.left,s=e.cloneNode(!0);s.style.position="absolute",s.style.left="".concat(a,"px"),s.style.top="".concat(o,"px"),s.style.width="".concat(n,"px"),s.style.height="".concat(r,"px"),i.appendChild(s)})),document.body.appendChild(i),e.dataTransfer.setDragImage(i,e.clientX,e.clientY),i},Ee=function(e){N(n,ge);var t=w(n);function n(){var e;y(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return b(x(e=t.call.apply(t,[this].concat(o))),"draggedElementShadow",void 0),b(x(e),"dragTarget",void 0),b(x(e),"positioner",null),b(x(e),"currentSelectedElementIds",[]),e}return m(n,[{key:"onDisable",value:function(){this.options.store.actions.clearEvents()}},{key:"handlers",value:function(){var e=this,t=this.options.store;return{connect:function(n,r){return t.actions.setDOM(r,n),e.reflect((function(e){e.select(n,r),e.hover(n,r),e.drop(n,r)}))},select:function(n,r){var o=e.addCraftEventListener(n,"mousedown",(function(n){n.craft.stopPropagation();var o=[];if(r){var a=t.query,i=a.getEvent("selected").all();(e.options.isMultiSelectEnabled(n)||i.includes(r))&&(o=i.filter((function(e){var t=a.node(e).descendants(!0),n=a.node(e).ancestors(!0);return!t.includes(r)&&!n.includes(r)}))),o.includes(r)||o.push(r)}t.actions.setNodeEvent("selected",o)})),a=e.addCraftEventListener(n,"click",(function(n){n.craft.stopPropagation();var o=t.query.getEvent("selected").all(),a=e.options.isMultiSelectEnabled(n),i=e.currentSelectedElementIds.includes(r),s=C(o);a&&i?(s.splice(s.indexOf(r),1),t.actions.setNodeEvent("selected",s)):!a&&o.length>1&&t.actions.setNodeEvent("selected",s=[r]),e.currentSelectedElementIds=s}));return function(){o(),a()}},hover:function(n,r){var o=e.addCraftEventListener(n,"mouseover",(function(e){e.craft.stopPropagation(),t.actions.setNodeEvent("hovered",r)})),a=e.addCraftEventListener(n,"mouseleave",(function(e){e.craft.stopPropagation(),t.actions.setNodeEvent("hovered",null)}));return function(){o(),a()}},drop:function(n,r){var o=e.addCraftEventListener(n,"dragover",(function(n){if(n.craft.stopPropagation(),n.preventDefault(),e.positioner){var o=e.positioner.computeIndicator(r,n.clientX,n.clientY);o&&t.actions.setIndicator(o)}})),a=e.addCraftEventListener(n,"dragenter",(function(e){e.craft.stopPropagation(),e.preventDefault()}));return function(){a(),o()}},drag:function(r,o){if(!t.query.node(o).isDraggable())return function(){};r.setAttribute("draggable","true");var a=e.addCraftEventListener(r,"dragstart",(function(r){r.craft.stopPropagation();var a=t.query,i=t.actions,s=a.getEvent("selected").all(),d=e.options.isMultiSelectEnabled(r);e.currentSelectedElementIds.includes(o)||(s=d?[].concat(C(s),[o]):[o],t.actions.setNodeEvent("selected",s)),i.setNodeEvent("dragged",s);var c=s.map((function(e){return a.node(e).get().dom}));e.draggedElementShadow=Ne(r,c,n.forceSingleDragShadow),e.dragTarget={type:"existing",nodes:s},e.positioner=new be(e.options.store,e.dragTarget)})),i=e.addCraftEventListener(r,"dragend",(function(n){n.craft.stopPropagation(),e.dropElement((function(e,n){"new"!==e.type&&t.actions.move(e.nodes,n.placement.parent.id,n.placement.index+("after"===n.placement.where?1:0))}))}));return function(){r.setAttribute("draggable","false"),a(),i()}},create:function(r,o,i){r.setAttribute("draggable","true");var s=e.addCraftEventListener(r,"dragstart",(function(r){var i;if(r.craft.stopPropagation(),"function"==typeof o){var s=o();i=a().isValidElement(s)?t.query.parseReactElement(s).toNodeTree():s}else i=t.query.parseReactElement(o).toNodeTree();e.draggedElementShadow=Ne(r,[r.currentTarget],n.forceSingleDragShadow),e.dragTarget={type:"new",tree:i},e.positioner=new be(e.options.store,e.dragTarget)})),c=e.addCraftEventListener(r,"dragend",(function(n){n.craft.stopPropagation(),e.dropElement((function(e,n){"existing"!==e.type&&(t.actions.addNodeTree(e.tree,n.placement.parent.id,n.placement.index+("after"===n.placement.where?1:0)),i&&d()(i.onCreate)&&i.onCreate(e.tree))}))}));return function(){r.removeAttribute("draggable"),s(),c()}}}}},{key:"dropElement",value:function(e){var t=this.options.store;if(this.positioner){var n=this.draggedElementShadow,r=this.positioner.getIndicator();this.dragTarget&&r&&!r.error&&e(this.dragTarget,r),n&&(n.parentNode.removeChild(n),this.draggedElementShadow=null),this.dragTarget=null,t.actions.setIndicator(null),t.actions.setNodeEvent("dragged",null),this.positioner.cleanup(),this.positioner=null}}}]),n}();function Oe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=0,a=0,i=0,s=0,d=e.where;return n?n.inFlow?(i=n.outerWidth,s=r,o="before"===d?n.top:n.bottom,a=n.left):(i=r,s=n.outerHeight,o=n.top,a="before"===d?n.left:n.left+n.outerWidth):t&&(o=t.top+t.padding.top,a=t.left+t.padding.left,i=t.outerWidth-t.padding.right-t.padding.left-t.margin.left-t.margin.right,s=r),{top:"".concat(o,"px"),left:"".concat(a,"px"),width:"".concat(i,"px"),height:"".concat(s,"px")}}b(Ee,"forceSingleDragShadow",(0,r.F2)()&&(0,r.j9)());const je=()=>{const{indicator:e,indicatorOptions:t,enabled:n}=P((e=>({indicator:e.indicator,indicatorOptions:e.options.indicator,enabled:e.options.enabled}))),i=I();return(0,o.useEffect)((()=>{i&&(n?i.enable():i.disable())}),[n,i]),e?a().createElement(r.c4,{style:{...Oe(e.placement,(0,r.Jo)(e.placement.parent.dom),e.placement.currentNode&&(0,r.Jo)(e.placement.currentNode.dom),t.thickness),backgroundColor:e.error?t.error:t.success,transition:t.transition||"0.2s ease-in"},parentDom:e.placement.parent.dom}):null},xe=({children:e})=>{const t=(0,o.useContext)(k),n=(0,o.useMemo)((()=>t.query.getOptions().handlers(t)),[t]);return n?a().createElement(D.Provider,{value:n},a().createElement(je,null),e):null},we={nodes:{},events:{dragged:new Set,selected:new Set,hovered:new Set},indicator:null,options:{onNodesChange:()=>null,onRender:({render:e})=>e,onBeforeMoveEnd:()=>null,resolver:{},enabled:!0,indicator:{error:"red",success:"rgb(98, 196, 98)"},handlers:e=>new Ee({store:e,isMultiSelectEnabled:e=>!!e.metaKey}),normalizeNodes:()=>{}}},Ce={methods:function(e,t){return v(v({},function(e,t){var n=function(t,n,a){if(function n(o,a){var s=t.nodes[o];"string"!=typeof s.data.type&&(0,i.A)(e.options.resolver[s.data.name],r.GP.replace("%node_type%","".concat(s.data.type.name))),e.nodes[o]=v(v({},s),{},{data:v(v({},s.data),{},{parent:a})}),s.data.nodes.length>0&&(delete e.nodes[o].data.props.children,s.data.nodes.forEach((function(e){return n(e,s.id)}))),Object.values(s.data.linkedNodes).forEach((function(e){return n(e,s.id)}))}(t.rootNodeId,n),n){var s=o(n);if("child"!==a.type)s.data.linkedNodes[a.id]=t.rootNodeId;else{var d=a.index;null!=d?s.data.nodes.splice(d,0,t.rootNodeId):s.data.nodes.push(t.rootNodeId)}}else(0,i.A)(t.rootNodeId===r.e3,"Cannot add non-root Node without a parent")},o=function(t){(0,i.A)(t,r.v5);var n=e.nodes[t];return(0,i.A)(n,r.vc),n},a=function t(n){var r=e.nodes[n],o=e.nodes[r.data.parent];if(r.data.nodes&&C(r.data.nodes).forEach((function(e){return t(e)})),r.data.linkedNodes&&Object.values(r.data.linkedNodes).map((function(e){return t(e)})),o.data.nodes.includes(n)){var a=o.data.nodes;a.splice(a.indexOf(n),1)}else{var i=Object.keys(o.data.linkedNodes).find((function(e){return o.data.linkedNodes[e]===e}));i&&delete o.data.linkedNodes[i]}!function(e,t){Object.keys(e.events).forEach((function(n){var r=e.events[n];r&&r.has&&r.has(t)&&(e.events[n]=new Set(Array.from(r).filter((function(e){return t!==e}))))}))}(e,n),delete e.nodes[n]};return{addLinkedNodeFromTree:function(e,t,r){var i=o(t).data.linkedNodes[r];i&&a(i),n(e,t,{type:"linked",id:r})},add:function(e,t,o){var a=[e];Array.isArray(e)&&((0,r.lt)("actions.add(node: Node[])",{suggest:"actions.add(node: Node)"}),a=e),a.forEach((function(e){n({nodes:b({},e.id,e),rootNodeId:e.id},t,{type:"child",index:o})}))},addNodeTree:function(e,t,r){n(e,t,{type:"child",index:r})},delete:function(n){ne(e.nodes,n,{existOnly:!0,idOnly:!0}).forEach((function(e){var n=e.node;(0,i.A)(!t.node(n.id).isTopLevelNode(),r.ZQ),a(n.id)}))},deserialize:function(e){var n="string"==typeof e?JSON.parse(e):e,o=Object.keys(n).map((function(e){var o=e;return e===r.uX&&(o=r.e3),[o,t.parseSerializedNode(n[e]).toNode((function(e){return e.id=o}))]}));this.replaceNodes(te(o))},move:function(n,r,o){var a=ne(e.nodes,n,{existOnly:!0}),i=e.nodes[r],s=new Set;a.forEach((function(n,a){var d=n.node,c=d.id,u=d.data.parent;t.node(r).isDroppable([c],(function(e){throw new Error(e)})),e.options.onBeforeMoveEnd(d,i,e.nodes[u]);var l=e.nodes[u].data.nodes;s.add(l);var f=l.indexOf(c);l[f]="$$",i.data.nodes.splice(o+a,0,c),e.nodes[c].data.parent=r})),s.forEach((function(e){var t=e.length;C(e).reverse().forEach((function(n,r){"$$"===n&&e.splice(t-1-r,1)}))}))},replaceNodes:function(t){this.clearEvents(),e.nodes=t},clearEvents:function(){this.setNodeEvent("selected",null),this.setNodeEvent("hovered",null),this.setNodeEvent("dragged",null),this.setIndicator(null)},reset:function(){this.clearEvents(),this.replaceNodes({})},setOptions:function(t){t(e.options)},setNodeEvent:function(t,n){if(e.events[t].forEach((function(n){e.nodes[n]&&(e.nodes[n].events[t]=!1)})),e.events[t]=new Set,n){var r=ne(e.nodes,n,{idOnly:!0,existOnly:!0}),o=new Set(r.map((function(e){return e.node.id})));o.forEach((function(n){e.nodes[n].events[t]=!0})),e.events[t]=o}},setCustom:function(t,n){ne(e.nodes,t,{idOnly:!0,existOnly:!0}).forEach((function(t){return n(e.nodes[t.node.id].data.custom)}))},setDOM:function(t,n){e.nodes[t]&&(e.nodes[t].dom=n)},setIndicator:function(t){t&&(!t.placement.parent.dom||t.placement.currentNode&&!t.placement.currentNode.dom)||(e.indicator=t)},setHidden:function(t,n){e.nodes[t].data.hidden=n},setProp:function(t,n){ne(e.nodes,t,{idOnly:!0,existOnly:!0}).forEach((function(t){return n(e.nodes[t.node.id].data.props)}))},selectNode:function(t){if(t){var n=ne(e.nodes,t,{idOnly:!0,existOnly:!0});this.setNodeEvent("selected",n.map((function(e){return e.node.id})))}else this.setNodeEvent("selected",null);this.setNodeEvent("hovered",null)}}}(e,t)),{},{setState:function(t){var n=j(this,re);t(e,n)}})},ignoreHistoryForActions:["setDOM","setNodeEvent","selectNode","clearEvents","setOptions","setIndicator"],normalizeHistory:e=>{Object.keys(e.events).forEach((t=>{Array.from(e.events[t]||[]).forEach((n=>{e.nodes[n]||e.events[t].delete(n)}))})),Object.keys(e.nodes).forEach((t=>{const n=e.nodes[t];Object.keys(n.events).forEach((t=>{n.events[t]&&e.events[t]&&!e.events[t].has(n.id)&&(n.events[t]=!1)}))}))}},Te=(e,t)=>(0,r.Oj)(Ce,{...we,options:{...we.options,...e}},ye,t),Ae=({children:e,...t})=>{void 0!==t.resolver&&(0,i.A)("object"==typeof t.resolver&&!Array.isArray(t.resolver)&&null!==t.resolver,r.yV);const n=(0,o.useRef)(t),s=Te(n.current,((e,t,n,o,a)=>{if(!n)return;const{patches:i,...s}=n;for(let n=0;n<i.length;n++){const{path:d}=i[n],c=d.length>2&&"nodes"===d[0]&&"data"===d[2];if([r.Nx.IGNORE,r.Nx.THROTTLE].includes(s.type)&&s.params&&(s.type=s.params[0]),["setState","deserialize"].includes(s.type)||c){a((n=>{e.options.normalizeNodes&&e.options.normalizeNodes(n,t,s,o)}));break}}}));return(0,o.useEffect)((()=>{s&&void 0!==t.enabled&&s.query.getOptions().enabled!==t.enabled&&s.actions.setOptions((e=>{e.enabled=t.enabled}))}),[s,t.enabled]),(0,o.useEffect)((()=>{s.subscribe((e=>({json:s.query.serialize()})),(()=>{s.query.getOptions().onNodesChange(s.query)}))}),[s]),s?a().createElement(k.Provider,{value:s},a().createElement(xe,null,e)):null};var Se=["events","data"],ke=["nodes"],De=["nodes"],Ie=["_hydrationTimestamp","rules"],Pe=["_hydrationTimestamp","rules"],Re=function(e){var t=e.events,n=e.data,r=n.nodes,o=n.linkedNodes,a=j(e,Se),i=le(u()(e));return{node:e=v(v(v({},i),a),{},{events:v(v({},i.events),t),dom:e.dom||i.dom}),childNodes:r,linkedNodes:o}},Le=function(e,t){var n=t.nodes,r=j(t,ke),o=e.nodes,a=j(e,De);expect(a).toEqual(r);var i=Object.keys(n).reduce((function(e,t){var r=j(n[t],Ie);return e[t]=r,e}),{}),s=Object.keys(o).reduce((function(e,t){var n=j(o[t],Pe);return e[t]=n,e}),{});expect(s).toEqual(i)},qe=function(e){var t={};return function e(n){var r=Re(n),o=r.node,a=r.childNodes,i=r.linkedNodes;t[o.id]=o,a&&a.forEach((function(n,r){var a=Re(n),i=a.node,s=a.childNodes,d=a.linkedNodes;i.data.parent=o.id,t[i.id]=i,o.data.nodes[r]=i.id,e(v(v({},i),{},{data:v(v({},i.data),{},{nodes:s||[],linkedNodes:d||{}})}))})),i&&Object.keys(i).forEach((function(n){var r=Re(i[n]),a=r.node,s=r.childNodes,d=r.linkedNodes;o.data.linkedNodes[n]=a.id,a.data.parent=o.id,t[a.id]=a,e(v(v({},a),{},{data:v(v({},a.data),{},{nodes:s||[],linkedNodes:d||{}})}))}))}(e),t},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nodes,n=e.events;return v(v(v({},we),e),{},{nodes:t?qe(t):{},events:v(v({},we.events),n||{})})}},5463:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},2009:(e,t,n)=>{var r=n(5902),o=n(4478),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},6803:(e,t,n)=>{var r=n(3882),o=n(4812);e.exports=function(e,t){return e&&r(t,o(t),e)}},6448:(e,t,n)=>{var r=n(3882),o=n(9779);e.exports=function(e,t){return e&&r(t,o(t),e)}},5902:(e,t,n)=>{var r=n(7693);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5533:(e,t,n)=>{var r=n(7951),o=n(5463),a=n(2009),i=n(6803),s=n(6448),d=n(3080),c=n(2929),u=n(2521),l=n(850),f=n(9740),p=n(3),v=n(875),h=n(7283),y=n(9493),g=n(4643),m=n(2087),b=n(2906),N=n(128),E=n(8711),O=n(6698),j=n(4812),x=n(9779),w="[object Arguments]",C="[object Function]",T="[object Object]",A={};A[w]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[T]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[C]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,S,k,D,I){var P,R=1&n,L=2&n,q=4&n;if(S&&(P=D?S(t,k,D,I):S(t)),void 0!==P)return P;if(!E(t))return t;var M=m(t);if(M){if(P=h(t),!R)return c(t,P)}else{var _=v(t),F=_==C||"[object GeneratorFunction]"==_;if(b(t))return d(t,R);if(_==T||_==w||F&&!D){if(P=L||F?{}:g(t),!R)return L?l(t,s(P,t)):u(t,i(P,t))}else{if(!A[_])return D?t:{};P=y(t,_,R)}}I||(I=new r);var z=I.get(t);if(z)return z;I.set(t,P),O(t)?t.forEach((function(r){P.add(e(r,n,S,r,t,I))})):N(t)&&t.forEach((function(r,o){P.set(o,e(r,n,S,o,t,I))}));var B=M?void 0:(q?L?p:f:L?x:j)(t);return o(B||t,(function(r,o){B&&(r=t[o=r]),a(P,o,e(r,n,S,o,t,I))})),P}},9430:(e,t,n)=>{var r=n(8711),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},8986:(e,t,n)=>{var r=n(875),o=n(8512);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},1680:(e,t,n)=>{var r=n(875),o=n(8512);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},369:(e,t,n)=>{var r=n(8711),o=n(5521),a=n(2391),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},5775:(e,t,n)=>{var r=n(6150);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},3080:(e,t,n)=>{e=n.nmd(e);var r=n(6455),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},6359:(e,t,n)=>{var r=n(5775);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},9351:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},810:(e,t,n)=>{var r=n(3259),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},9999:(e,t,n)=>{var r=n(5775);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},2929:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},3882:(e,t,n)=>{var r=n(2009),o=n(5902);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var s=-1,d=t.length;++s<d;){var c=t[s],u=a?a(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),i?o(n,c,u):r(n,c,u)}return n}},2521:(e,t,n)=>{var r=n(3882),o=n(5522);e.exports=function(e,t){return r(e,o(e),t)}},850:(e,t,n)=>{var r=n(3882),o=n(8885);e.exports=function(e,t){return r(e,o(e),t)}},7693:(e,t,n)=>{var r=n(828),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},3:(e,t,n)=>{var r=n(9465),o=n(8885),a=n(9779);e.exports=function(e){return r(e,a,o)}},2829:(e,t,n)=>{var r=n(1741)(Object.getPrototypeOf,Object);e.exports=r},8885:(e,t,n)=>{var r=n(654),o=n(2829),a=n(5522),i=n(5915),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=s},7283:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},9493:(e,t,n)=>{var r=n(5775),o=n(6359),a=n(9351),i=n(810),s=n(9999);e.exports=function(e,t,n){var d=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new d(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new d;case"[object Number]":case"[object String]":return new d(e);case"[object RegExp]":return a(e);case"[object Symbol]":return i(e)}}},4643:(e,t,n)=>{var r=n(9430),o=n(2829),a=n(5521);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},2391:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},3037:(e,t,n)=>{var r=n(5533);e.exports=function(e){return r(e,5)}},128:(e,t,n)=>{var r=n(8986),o=n(8247),a=n(7871),i=a&&a.isMap,s=i?o(i):r;e.exports=s},6698:(e,t,n)=>{var r=n(1680),o=n(8247),a=n(7871),i=a&&a.isSet,s=i?o(i):r;e.exports=s},9779:(e,t,n)=>{var r=n(9789),o=n(369),a=n(1584);e.exports=function(e){return a(e)?r(e,!0):o(e)}}}]);
//# sourceMappingURL=170.2a88ae3af9.chunk.js.map